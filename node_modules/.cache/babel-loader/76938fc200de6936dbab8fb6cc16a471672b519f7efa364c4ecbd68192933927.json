{"ast":null,"code":"import _objectSpread from\"/Users/nikita/Fse-Project-React/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/nikita/Fse-Project-React/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{Link,useNavigate}from\"react-router-dom\";import{useEffect,useState}from\"react\";import*as userService from\"../../services/users-service\";import React from\"react\";import{UserList}from\"./user-list\";import*as authService from\"../../services/auth-service\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var Login=function Login(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),existingUsers=_useState2[0],setExistingUsers=_useState2[1];// {username: 'user1', email: 'user1', password: 'user1', _id: '123'}\n// ]);\nvar _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),newUser=_useState4[0],setNewUser=_useState4[1];var _useState5=useState({}),_useState6=_slicedToArray(_useState5,2),loginUser=_useState6[0],setLoginUser=_useState6[1];var navigate=useNavigate();var login=function login(){return authService.login(loginUser).then(function(user){return navigate('/profile/mytuits');}).catch(function(e){return alert(e);});};var register=function register(){return authService.signup(newUser).then(function(){return navigate('/profile');}).catch(function(e){return alert(e);});};var deleteUser=function deleteUser(uid){return userService.deleteUser(uid).then(findAllUsers);};var findAllUsers=function findAllUsers(){return userService.findAllUsers().then(function(users){setExistingUsers(users);});};useEffect(findAllUsers,[]);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Register\"}),/*#__PURE__*/_jsx(\"input\",{className:\"mb-2 form-control\",onChange:function onChange(e){return setNewUser(_objectSpread(_objectSpread({},newUser),{},{username:e.target.value}));},placeholder:\"username\"}),/*#__PURE__*/_jsx(\"input\",{className:\"mb-2 form-control\",onChange:function onChange(e){return setNewUser(_objectSpread(_objectSpread({},newUser),{},{password:e.target.value}));},placeholder:\"password\",type:\"password\"}),/*#__PURE__*/_jsx(\"input\",{className:\"mb-2 form-control\",onChange:function onChange(e){return setNewUser(_objectSpread(_objectSpread({},newUser),{},{email:e.target.value}));},placeholder:\"email\",type:\"email\"}),/*#__PURE__*/_jsx(\"button\",{onClick:register,className:\"btn btn-primary mb-5\",children:\"Register\"}),/*#__PURE__*/_jsx(\"h1\",{children:\"Login\"}),/*#__PURE__*/_jsx(\"input\",{className:\"mb-2 form-control\",onChange:function onChange(e){return setLoginUser(_objectSpread(_objectSpread({},loginUser),{},{username:e.target.value}));},placeholder:\"username\"}),/*#__PURE__*/_jsx(\"input\",{className:\"mb-2 form-control\",onChange:function onChange(e){return setLoginUser(_objectSpread(_objectSpread({},loginUser),{},{password:e.target.value}));},placeholder:\"password\",type:\"password\"}),/*#__PURE__*/_jsx(\"button\",{onClick:login,className:\"btn btn-primary mb-5\",children:\"Login\"}),/*#__PURE__*/_jsx(\"h1\",{children:\"Login As\"}),/*#__PURE__*/_jsx(UserList,{users:existingUsers,deleteUser:deleteUser})]});};","map":{"version":3,"names":["Link","useNavigate","useEffect","useState","userService","React","UserList","authService","Login","existingUsers","setExistingUsers","newUser","setNewUser","loginUser","setLoginUser","navigate","login","then","user","catch","e","alert","register","signup","deleteUser","uid","findAllUsers","users","username","target","value","password","email"],"sources":["/Users/nikita/Fse-Project-React/src/components/profile/login.js"],"sourcesContent":["import {Link, useNavigate} from \"react-router-dom\";\nimport {useEffect, useState} from \"react\";\nimport * as userService from \"../../services/users-service\";\nimport React from \"react\";\nimport {UserList} from \"./user-list\";\nimport * as authService from \"../../services/auth-service\"\n\nexport const Login = () => {\n    const [existingUsers, setExistingUsers] = useState([]);\n    // {username: 'user1', email: 'user1', password: 'user1', _id: '123'}\n    // ]);\n    const [newUser, setNewUser] = useState({});\n    const [loginUser, setLoginUser] = useState({});\n    const navigate = useNavigate();\n    const login = () =>\n        authService.login(loginUser)\n          .then((user) => navigate('/profile/mytuits'))\n          .catch(e => alert(e));\n    const register = () =>\n        authService.signup(newUser)\n            .then(() => navigate('/profile'))\n            .catch(e => alert(e));\n    const deleteUser = (uid) =>\n        userService.deleteUser(uid)\n            .then(findAllUsers)\n    const findAllUsers = () =>\n        userService.findAllUsers()\n            .then(users => {\n                setExistingUsers(users)\n            })\n    useEffect(findAllUsers, []);\n\n    return (\n        <div>\n          <h1>Register</h1>\n          <input className=\"mb-2 form-control\"\n                 onChange={(e) =>\n                   setNewUser({...newUser, username: e.target.value})}\n                 placeholder=\"username\"/>\n          <input className=\"mb-2 form-control\"\n                 onChange={(e) =>\n                   setNewUser({...newUser, password: e.target.value})}\n                 placeholder=\"password\" type=\"password\"/>\n          <input className=\"mb-2 form-control\"\n                 onChange={(e) =>\n                   setNewUser({...newUser, email: e.target.value})}\n                 placeholder=\"email\" type=\"email\"/>\n          <button onClick={register} className=\"btn btn-primary mb-5\">Register\n          </button>\n\n          <h1>Login</h1>\n          <input className=\"mb-2 form-control\"\n                 onChange={(e) =>\n                   setLoginUser({...loginUser, username: e.target.value})}\n                 placeholder=\"username\"/>\n          <input className=\"mb-2 form-control\"\n                 onChange={(e) =>\n                   setLoginUser({...loginUser, password: e.target.value})}\n                 placeholder=\"password\" type=\"password\"/>\n          <button onClick={login} className=\"btn btn-primary mb-5\">Login</button>\n\n          <h1>Login As</h1>\n\n          <UserList users={existingUsers} deleteUser={deleteUser}/>\n\n        </div>\n    );\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}